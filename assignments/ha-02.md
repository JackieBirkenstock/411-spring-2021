# Homework Assignment 2 (due Feb 25th)

The goal of this assignment is to practice number systems, bitwise operators, and integer representations in `C`.  The assignment is worth a total of 100 points.  If you have any questions or need any help, please visit us during office hours and/or post questions on EdStem.

## `1. HexDump (20 pts)`
This program will open a *binary file* and dump its contents to the *standard output*.  It should work similar to the `hexdump` utility.  You can use the example code from [fread](http://www.cplusplus.com/reference/cstdio/fread/) for opening a binary file.  Note that the example follows these steps for opening/loading/closing a binary file:

- create two pointers, one for the file and another for the buffer in memory
- open the binary file in `rb` mode
- check if the binary was successfuly opened
- obtain the file size in bytes
- allocate memory dynamically for the buffer
- load the file contents into the buffer
- free the memory dynamically allocated   

> We strongly suggest you to read the documentation of the following functions `fopen/fclose`, `fseek/ftell/rewind`, and `malloc/free`.

### Input
Your program will receive the following command line arguments:
```text
<fname> File name for the binary file
<N>     Number of bytes to show on each row (N>0)
```

The line below shows an example of using your program:
```bash
$ ./hexdump file.bin 16
```

### Output
Your program should write the contents of the binary file to the `stdout` in text form.  On each line your program will show a maximum of `N` bytes using hexadecimal notation.  The first token on each line must be the index of the first byte in that row, using an hexadecimal number of 4 bytes.  Check the example below for more details, assuming the input file contains 20 bytes.

```bash
$ ./hexdump file.bin 16
00000000 cf fa ed fe 07 00 00 01 03 00 00 00 02 00 00 00
00000010 0e 00 00 00
$
$ ./hexdump file.bin 8
00000000 cf fa ed fe 07 00 00 01 
00000008 03 00 00 00 02 00 00 00
00000010 0e 00 00 00
```

## `2. IP Addresses (25 pts)`
In this problem, your program will read a databank of *IP addresses* and their respective *subnet masks*.  The databank is stored as a *binary file* in which every consecutive 5 bytes represent an IP address and the number of bits in the subnet mask.  The goal of your program is to read the information provided in the databank and display the following information corresponding to each pair of IP address and subnet mask:

- the IP address
- the network address
- the usable IP range for hosts
- the subnet mask

> The following [video](https://www.youtube.com/watch?v=XQ3T14SIlV4) provides a detailed description of IP addreses and subnet masks

### Input
Your program will receive the following command line arguments:
```text
<fname> File name for the binary file
```

The line below shows an example of using your program:
```bash
$ ./decode-ips file.bin
```

### Output
Your program should send output to the `stdout` in text form.  For each consecutive 5 bytes in the binary file, you will print the corresponding IP/Subnet information.  Check the example below for more details, assuming the input file contains 15 bytes.

```bash
$ ./decode-ips file.bin
IP address:      222.110.11.20
Network address: 222.110.11.0
Usable IP range: 222.110.11.1 - 222.110.11.62
Subnet mask:     255.255.255.192

IP address:      148.31.27.2
Network address: 148.31.27.0
Usable IP range: 148.31.27.1 - 148.31.27.254
Subnet mask:     255.255.255.0

IP address:      32.10.10.1
Network address: 32.8.0.0
Usable IP range: 32.8.0.1 - 32.11.255.254
Subnet mask:     255.252.0.0
```

## `3. Parsing Instructions (25 pts)`
In this problem, your program will take as input a binary file containing instructions.  The goal of your program is to read through the file and print every instruction and its operands.  The instruction set is very simple, and all instructions follow a uniform encoding:

- 2 bits for the opcode
- 3 bits for a target register
- 3 bits for a source register

The following table shows the available instructions and their corresponnding opcodes in binary:

| instruction  | opcode |
| ------------- | ------------- |
| `add` | 00 |
| `sub` | 01 |
| `lw` | 10 |
| `sw` | 11 |

You can also assume that all registers are available to the instructions.  There are 8 registers using the following names:

| register  | number |
| ------------- | ------------- |
| `$S0` | 0 |
| `$S1` | 1 |
| `$S2` | 2 |
| `$S3` | 3 |
| `$T0` | 4 |
| `$T1` | 5 |
| `$T2` | 6 |
| `$T3` | 7 |

### Input
Your program will receive the following command line arguments:
```text
<fname> File name for the instructions
```
The line below shows an example of using your program:
```bash
$ ./decode example.bin
```

### Output
Your program should write each instruction to the `stdout` separated by a new line.  

For example, the byte `0x4D` encodes the instruction `sub $S1, $T1`, as it has the corresponding bitstring `01001101`.  

Using a binary file with a single instruction like the example above, your program should output the following values:

```bash
$ ./decode single.bin
sub $S1 $T1
```

## Submission and Grading
You will submit three files named `hexdump.c`, `decode-ips.c`, and `decode-bin.c`.  Each file/program should include its own `main` function.  You are required to provide meaningful comments in all your functions and use proper coding style and indentation.  Your submission will be tested and graded by an autograder using `gcc` on a `linux` machine, for this reason it cannot be stressed enough that your program must follow the specifications for input and output upon submission.  

For each of the questions you either pass the test cases (full points) or not (zero points).  To submit your solution to Gradescope, simply select the three required files and use the `drag and drop` option.

> :heavy_exclamation_mark: You must be reminded that students caught cheating or plagiarizing will receive `no credit`. Additional actions, including a failing grade in the class or referring the case for disciplinary action, may also be taken.